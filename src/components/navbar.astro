---
import logoImage from "../assets/logo.png";

// Definisi Warna & Style
const PRIMARY_ACCENT = "text-blue-900"; // Warna teks logo/dominan
const PRIMARY_COLOR_HOVER = "hover:text-blue-400"; // Ubah dari blue-950 ke blue-900 untuk kontras lebih baik
const TEXT_COLOR = "text-gray-100"; // kalau scrool kebawah sampe bagian lab dan ruang kelas membuat navbar ga kelihatan jadi ku ubah jadi abu teksnya
const ACTIVE_ACCENT = `${PRIMARY_ACCENT} border-b-2 border-blue-400 pb-2`; // Gaya link aktif ala UIB
const FONT_CLASS = "font-poppins";

// Fungsi untuk normalisasi path (menghapus trailing slash)
const normalize = (p: string) => (p === "/" ? "/" : p.replace(/\/$/, ""));
const currentPath = normalize(Astro.url.pathname);

// FUNGSI ISACTIVE
const isActive = (href: string) => {
  const normalizedHref = normalize(href);

  // Jika path saat ini cocok (termasuk '/')
  if (currentPath === normalizedHref) {
    return ACTIVE_ACCENT;
  }

  // Terapkan warna teks default (terang) dan hover
  // Kami tambahkan TEXT_COLOR di sini karena <ul> tidak lagi memiliki TEXT_COLOR
  return PRIMARY_COLOR_HOVER + " " + TEXT_COLOR;
};
// Data untuk Link Dropdown
const dropdownStyles =
  "bg-white text-gray-800 shadow-xl rounded-md mt-2 p-3 w-48 border border-gray-100 z-50";
---

<nav
  class="w-full fixed top-0 left-0 z-50 bg-white/5 backdrop-blur-xl border-b border-white/20 shadow-lg transition-all duration-300"
>
  <div class="max-w-7xl mx-auto flex items-center justify-between px-6 py-3">
    <input type="checkbox" id="menu-toggle" class="hidden peer" />

    <a href="/" class={`flex items-center gap-2 ${FONT_CLASS}`}>
      <img src={logoImage.src} alt="Logo TIF" class="w-8 h-8" />
      <span class={`text-xl font-bold ${PRIMARY_ACCENT}`}
        >Teknik Informatika</span
      >
    </a>

    <ul
      class={`text-sm hidden md:flex gap-12 font-semibold ${TEXT_COLOR} ${FONT_CLASS} flex-1 justify-center`}
    >
      <li class={isActive("/")}><a href="/">Beranda</a></li>

      <li class="group relative cursor-pointer">
        <span class={`flex items-center gap-1 ${isActive("/profil")}`}>
          Profil
          <svg
            class="w-3 h-3 text-gray-400 group-hover:text-blue-900 transition-transform duration-200"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
          </svg>
        </span>
        <div class={`absolute hidden group-hover:block ${dropdownStyles} `}>
          <a
            href="/profil"
            class={`block py-2 ${PRIMARY_COLOR_HOVER} text-sm font-normal text-gray-800`}
            >Profil</a
          >
          <a
            href="/about"
            class={`block py-2 ${PRIMARY_COLOR_HOVER} text-sm font-normal text-gray-800`}
            >Tentang TIF</a
          >
        </div>
      </li>

      <li class="group relative cursor-pointer">
        <span class={`flex items-center gap-1 ${isActive("/akademik")}`}>
          Akademik
          <svg
            class="w-3 h-3 text-gray-400 group-hover:text-blue-900 transition-transform duration-200"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
          </svg>
        </span>
        <div class={`absolute hidden group-hover:block ${dropdownStyles} `}>
          <a
            href="/akademik"
            class={`block py-2 ${PRIMARY_COLOR_HOVER} text-sm font-normal`}
            >Informasi Akademik</a
          >
        </div>
      </li>

      <li>
        <a href="/penelitian" class={isActive("/penelitian")}>Penelitian</a>
      </li>
      <li><a href="/berita" class={isActive("/berita")}>Berita</a></li>
      <li><a href="/agenda" class={isActive("/agenda")}>Agenda</a></li>
      <li><a href="/alumni" class={isActive("/alumni")}>Alumni</a></li>
    </ul>

    <label
      for="menu-toggle"
      class="md:hidden cursor-pointer text-gray-700 hover:text-green-600"
    >
      <svg
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </label>
  </div>

  <div
    class={`md:hidden hidden peer-checked:block absolute w-full bg-white shadow-lg border-t border-gray-100 ${FONT_CLASS}`}
  >
    <ul class="flex flex-col text-sm font-medium text-gray-700 px-6 py-2">
      <li class="py-2">
        <a href="/" class={`block ${isActive("/")}`}>Beranda</a>
      </li>
      <li class="py-2">
        <span class="block text-gray-700 font-semibold">Profil</span>
        <div class="pl-4 pt-1">
          <a href="/profil" class={`block py-1 ${isActive("/profil")}`}
            >Profil</a
          >
          <a href="/about" class={`block py-1 ${isActive("/about")}`}
            >Tentang TIF</a
          >
        </div>
      </li>
      <li class="py-2">
        <a href="/penelitian" class={isActive("/penelitian")}>Penelitian</a>
      </li>
      <li class="py-2">
        <a href="/berita" class={isActive("/berita")}>Berita</a>
      </li>
      <li class="py-2">
        <a href="/agenda" class={isActive("/agenda")}>Agenda</a>
      </li>
      <li class="py-2">
        <a href="/alumni" class={isActive("/alumni")}>Alumni</a>
      </li>
    </ul>
  </div>
</nav>
